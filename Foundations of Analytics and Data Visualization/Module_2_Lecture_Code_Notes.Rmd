# Module 2 Lecture Notes

# Section #1 - Probability

## Compute the probability of rolling two dice and having the sum of the dice be greater than 6.

## The outcomes are {(1,6), (2,5),(2,6), (3,4),(3,5),(3,6), (4,3),(4,4),(4,5),(4,6), (5,2), (5,3),(5,4),(5,5),(5,6), (6,1),(6,2),(6,3),(6,4),(6,5),(6,6)}

                  ### So, there are 21 possible outcomes out of 36. Hence, the probability is 21/36 = 0.58
                  
## Compute the probability of rolling two dice and getting exactly one 5 in the roll.

## The outcomes are {(5,1),(5,2),(5,3),(5,4),(5,6), (1,5),(2,5),(3,5),(4,5),(6,5)}

                  ### So, there are 10 possible outcomes out of 36. Hence, the probability is 10/36 = 0.28 ###
                  
## Compute the probability that from a standard deck of cards, you will draw a J, Q, K, or a Heart on the first draw. Assume no Jokers in the deck.

## The total number of outcomes are 3 * 4 + 10 = 22 (J, Q, K from the 4 suits Clubs, Diamonds, Hearts, and Spades + {A, 2, 3, ..., 10} from the Hearts). 

                ### Hence, the probability is 22/52 = 0.42 ###
                
# Install Required Packages

install.packages("combinat")
install.packages("https://cran.r-project.org/src/contrib/Archive/prob/prob_0.9-2.tar.gz",
                   repos = NULL, dependencies = TRUE)
                   
library(prob)
Prob <- prob::prob

# Section #2 - Sample Space

## The tosscoin function sets up the sample space for the experiment of tossing the coin repeatedly. The function returns a data frame object. The columns for the data frame are named toss1, toss2, .... The sample spaces for a single toss, two tosses, and three tosses are shown below.

tosscoin(1)

tosscoin(2)

tosscoin(3)

## The rolldie function sets up the sample space for the experiment of rolling a die repeatedly. The default for the number of sides of the die is 6. The function returns a data frame object. The columns for the data frame are named X1, X2, ...

## The following shows the sample spaces for a single roll of a 6-sided die and a 4-sided die respectively. The first argument is the number of rolls.

rolldie(1)

rolldie(1, nsides=4)

## Show the R commands for the space of outcomes of tossing 4 coins, and rolling 2 six-sided dice

tosscoin(4)

rolldie(2)

# Section #3 - Sampling from an Urn

## Suppose the urn has three balls labeled 1, 2, and 3 or colored red, green and blue. The following examples show the possible outcomes for a sample size 2 when sampling is done by default, i.e., unordered and done without replacement.

urnsamples(1:3, size = 2)

urnsamples(c("r", "g", "b"), size = 2)

## With replacement, the possible unordered outcomes are shown below.

urnsamples(1:3, size = 2, replace = TRUE)

urnsamples(c("r", "g", "b"), size = 2, replace = TRUE)

## With ordering and replacement, the outcomes are shown below. For example, (2, 1) and (1, 2) are separate outcomes.

urnsamples(1:3, size = 2, replace = TRUE, ordered = TRUE)

urnsamples(c("r", "g", "b"), size = 2, replace = TRUE, ordered = TRUE)

## The last scenario shows ordered sampling without replacement.

urnsamples(1:3, size = 2, replace = FALSE, ordered = TRUE)

urnsamples(c("r", "g", "b"), size = 2, replace = FALSE, ordered = TRUE)

## Many probability problems can be simulated by drawing proverbial objects from an urn.

# Use the following vector to answer the following questions. Show all R commands seq(1:10)
(x <- seq(1:10))

# Use urnsamples() to draw 3 elements from the vector, with replacement, where the order does not matter.

urnsamples(x, size=3, replace = TRUE, ordered = FALSE)

# Draw 2 elements from the vector, without replacement, where the order does matter.

urnsamples(x, size=2, replace=FALSE, ordered=TRUE)

# Draw 5 elements, without replacement, where the order does not matter.

urnsamples(x, size=5, replace=FALSE, ordered=FALSE)

# Draw 4 elements, with replacement, where the order does matter.

urnsamples(x, size=4, replace=TRUE, ordered=TRUE)

## Which of these samples has the greatest number of possible outcomes?

# Drawing 4, ordered, with replacement, produces the largest outcome space!

# Section #4 - Counting Tools

## The nsamp function calculates the above values, which is the number of rows in a sample space created by urnsamples, without explicitly generating the probability space. For an urn with 3 distinguishable elements, the number of ways for selecting 2 elements with the possible options for replacement and ordering are shown below. The default values are FALSE for replace and ordered arguments.

# Without replacement
nsamp(n = 3, k = 2, replace = FALSE, ordered = FALSE)
# With replacement
nsamp(n = 3, k = 2, replace = TRUE, ordered = FALSE)

# With ordering
nsamp(n = 3, k = 2, replace = FALSE, ordered = TRUE)

# With ordering & replacement
nsamp(n = 3, k = 2, replace = TRUE, ordered = TRUE)

## From the previous problem, we saw instances where the sample space, or outcome space, was very large. Sometimes, we only care about the size of the space, rather than each individual element. Use the nsamp() function to illustrate the size of the sample spaces seen in the previous problem. Show all R commands.

nsamp(n=10, k=3, replace=TRUE, ordered=FALSE)

nsamp(n=10, k=2, replace=FALSE, ordered=TRUE)

nsamp(n=10, k=5, replace=FALSE, ordered=FALSE)

nsamp(n=10, k=4, replace=TRUE, ordered=TRUE)

# Section #5 - Events

## The following sample space shows all the outcomes when a coin is tossed three times. The makespace option with the value TRUE creates the probability space for the outcomes by adding the probs column to the data frame. The sample space has a total of 8 outcomes. The probability for each outcome is 1/8 = 0.125.

(S <- tosscoin(3, makespace= TRUE))

## The [] operator can be used for filtering the rows of the sample space. Different approaches for selecting the rows are shown below.

S[2:4, ]

S[seq(1,8, by = 2), ]

S[c(2,4,6,8), ]

## The subset function can be used for selecting rows based on a logical condition. The following selects all rows where the third toss is a head.

subset(S, toss3 == 'H')

## The probability that the third toss is a head is 4/8 = 0.5. The sum of the probs column will also result in the same value. Similarly, the outcomes where the first toss and the third toss are heads are selected as shown below.

subset(S, toss1 == 'H' & toss3 == 'H')

## The probability that the first toss and the third toss are heads is 2/8 = 0.25.
# The following sample space shows all outcomes when a die is rolled twice. The makespace option with the value TRUE creates the probability space for the outcomes by adding the probs column to the data frame. The number of rows of the data frame is the total number of outcomes

(S <- rolldie(2, makespace = TRUE))

## The event that the two rolls are the same is the collection of outcomes filtered as shown below.

subset(S, X1 == X2)

## The probability that the two rolls are the same is 6/36 = 0.167.
# The event that the sum of the two rolls is at least 10 is the collection of outcomes filtered as shown below.

subset(S, X1 + X2 >= 10)

## The probability that the sum of the two rolls is at least 10 is 6/36 = 0.167.
# The event that the first roll is either 5 or 6 is the collection of outcomes filtered as shown below. The %in% function tests whether the values of the first argument lie anywhere within the second argument (X1 %in% 5:6). This is more convenient than specifying X1 == 5 | X1

subset(S, X1 %in% 5:6)

## The probability that the first roll is either 5 or 6 is 12/36 = 0.33.
# The following filters only the outcomes where the first roll is either 5 or 6 and the second roll is either 1 or 3.

subset(S, X1 %in% 5:6 & X2 %in% c(1,3))

## The probability of getting 5 or 6 in the first roll and 1 or 3 in the second roll is 4/36 = 0.11. The following sample space sets up all 216 outcomes when a die is rolled three times.

(S <- rolldie(3, makespace = TRUE))
nrow(S)

## The isin(x, y) function is useful for checking whether all the values of y are in x. By default, the ordered argument is FALSE. There is only one outcome where the sequences of rolls have to be 4, 5, and 6.

subset(S, isin(S, c(4,5,6), ordered = TRUE))

## If ordering is not required, all permutations of (4, 5, 6) are possible outcomes.

subset(S, isin(S, c(4,5,6))

## The second argument can be a subset. The following filter selects two values (4 and 6) that should occur in order among the three rolls.

subset(S, isin(S, c(4,6), ordered = TRUE)

## The cards() function sets the sample space for the standard deck of cards. The default option for jokers argument is FALSE. The function returns a data frame with 52 rows. The two columns of the data frame are named rank and suit.

(S <- cards(makespace = TRUE))
nrow(S)

head(S, n = 2)

## The following subsets show the 13 cards for each suit.

subset(S, suit == "Club")

subset(S, suit == "Diamond")

subset(S, suit == "Heart")

subset(S, suit == "Spade")

## The outcomes where the rank of the selected card is 2, 3, or 4 can be filtered as shown below.

subset(S, rank %in% 2:4) ## The probability that the selected card is 2, 3, or 4 is 12/52 = 0.23.

## The outcomes where the selected card is a King or a Queen can be filtered as shown below.

subset(S, rank %in% c('K', 'Q')) # The probability that the selected card is a King or a Queen is 8/52 = 0.15

## The set operations union, intersect, and setdiff perform the union, the intersection, and the difference of the given outcomes.
## For the card deck sample space S, let the event A represent the selected card suit is a Heart and the event B represent the selected card rank is either a 10 or a Queen.

S <- cards(makespace = TRUE)
A <- subset(S, suit == "Heart")
B <- subset(S, rank %in% c(10, "Q"))

## The possible outcomes for the events A and B are shown below.

A
B

## The union of the events A and B consists of all the outcomes that are in A or B or both.

union(A, B)

## The intersection of the events A and B consists of all the outcomes that are in both A and B.

intersect(A, B)

## The difference of the events A and B consists of all the outcomes that are in A but not in B.

setdiff(A, B)

## The set difference operation is not commutative. The following shows the different results for the difference of the events B and A.

setdiff(B, A)

## The complement of an event A, written as A , is the difference between the sample space, S, and the event A. setdiff(S, A) will result in all outcomes that are either Clubs, Diamonds, or Spades.

setdiff(S, A)

# Section #6 - Setting up The Probability Space

## The following code shows an alternate approach for assigning probabilities for the experiment of rolling a die. The outcomes are generated as shown below.

(outcomes <- rolldie(1))

## Since there are 6 outcomes, 6 probability values are needed. The following shows a vector of equal values.

(p <-rep(1/6, times = 6))

## The probspace function assigns the probabilities to each of the corresponding outcomes.

probspace(outcomes, probs = p)
## The above is equivalent to the rolldie invocation with makespace argument as TRUE.
rolldie(1, makespace= TRUE)

## Suppose that the die is not fair, with some faces having a better chance than the rest. The following example shows a vector of different probabilities used to set up the sample probability space.

p <- c(0.2, 0.15, 0.15, 0.15, 0.15, 0.2)
probspace(outcomes, probs = p)

## Use probspace() to set up a probability space for rolling a loaded die, where the probability of rolling of a 3 or a 4 are 0.2, and the remaining numbers have an equal probability.

(outcomes <- seq(1:6))
(1 - 2*(0.2)) / 4
(p <- c(0.15, 0.15, 0.2, 0.2, 0.15, 0.15))
(space <- probspace(outcomes, p))

# Section #7 - The Prob Function







