---
title: "UFC Fights Analysis"
author: "David Lotito"
date: 9/28/2022
output:
  html_document:
    fig_width: 8
    code_folding: hide
    highlight: tango
    toc: true
    toc_float:
      collapsed: true
---


```{r setup, include=FALSE}
knitr::opts_chunk$set(fig.width=8, fig.height=4,
                      echo=FALSE, warning=FALSE, message=FALSE)
```

```{r echo=TRUE}
# Import CSV
library(plotly)

ufc_data <- read.csv("/Users/davelotito/Code/Masters_Degree_Projects/Foundations of Analytics and Data Visualization/Term_Project/UFC_Preprocessed_Fight_Data.csv", header = T)

winner_title <- ufc_data[(c("Winner", "title_bout"))]
```

# Dataset Overview

The following dataset is from Kaggle and contains the UFC-Fight historical data from 1993 to 2021.This dataset is a list of every UFC fight in the history of the organisation. Every row contains information about both fighters, fight details and the winner. The data was scraped using beautifulsoup in Python and processed via Pandas. This is the preprocessed file where each row contains information about each fighter collected up until this particular fight and the descriptive fight details. In this file, feature engineering, missing data treatment and one hot encoding are already done. The raw files have been merged to form this dataset.

# Data Prep

Each row is a compilation of both fighter stats. Fighters are represented by 'red' and 'blue' (for red and blue corner). So for instance, red fighter has the complied average stats of all the fights except the current one. The stats include damage done by the red fighter on the opponent and the damage done by the opponent on the fighter (represented by 'opp' in the columns) in all the fights this particular red fighter has had, except this one as it hasn't occured yet (in the data). Same information exists for blue fighter. The target variable is 'Winner' which is the only column that tells you what happened.

# Goal of Analysis

The goal of this analysis is to understand how the fights have changed over the course of time and to understand the fighters strategies

# Wins by Color

We want to understand if a specific color gives any indicator if a fighter is more likely to win a fight. In the below bar plot we are showing the frequency of wins for Blue vs. Red fighter color.

```{r, echo = FALSE}
barplot(table(winner_title[1]), col = c("Blue", "Red"), xlab = "Red Wins vs. Blue Wins", ylab = "Frequency", main = "Fights 1993-2021", ylim = c(0,5000))
```

### Wins by Color for Title Fights vs. Non-Title Fights

Since we can see that more red colored fighters are winning fights we wanted to see if the same applies when we add in another variable, in this case we are looking at fighting for a title. The results show that when fighting for a title, red fighters tend to win more often than blue fighters.


```{r, echo = FALSE}
barplot(table(winner_title), col = c("Blue", "Red"), xlab = "Title Bout vs. Non-Title Bout", ylab = "Frequency", main = "Fights 1993-2021 by Title Bout")
```


### Fighter Ages: Blue vs. Red

As we can see from the analysis in the scatter plot that the majority of the fights are in their early 20s to late 30s indicating that as the fighters age they are less and less likely to continue fighting. We do have some outliers of course who fight well into their 40s and even 50s. The average age for the fighters overall is ~30.

```{r, echo = FALSE}
ages <- ufc_data[c("B_age", "R_age")]

plot(ages, main = "Age of Fighters - 1993 to 2021", col = c("blue", "red"))
legend(x=48,y=45,c("B_age","R_age"),cex=.8,col=c("blue","red"),pch=c(1,1))

summary(ages)
```

### Fighter Wins: Blue vs. Red

After analyzing the fighters number of wins, number of wins in a title fight, and the ages of fighters I wanted to take a deeper diver into the overall picture of the blue vs. red wins & losses to see the bigger picture. As we can see from the box plot below that the red fighters are clearly the better fighters overall with more wins over the blue fighters. But we need to take into account that there has been less fights overall for the blue fighters as we can see from the box plots.


```{r, echo = FALSE}
wins <- ufc_data[c("B_wins", "R_wins", "B_losses", "R_losses")]
boxplot(wins, horizontal = T, col=c("blue","red"), main = "Red/Blue: Wins vs. Losses", xlab = "Numbers of Wins/Losses", las = 1, cex.axis=0.8)
colSums(wins)
```


